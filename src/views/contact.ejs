<!DOCTYPE html>
<html lang="en">
<%- include('partials/head', { title: 'Contact' }) %>
<body>
  <%- include('partials/header') %>

  <h1 style="display: none;">Contact Form</h1>

  <div class="container my-5">
    <h2 class="mx-auto my-5" style="max-width: 500px" id="contact-title">
      Contact Form
    </h2>
    <form
      class="mx-auto my-5"
      style="max-width: 500px"
      id="contactForm"
      action="/contact"
      method="post"
    >
      <div class="form-group">
        <label for="name" class="form-label">Name</label>
        <input
          type="text"
          id="name"
          name="name"
          class="form-control"
          required
          placeholder="Enter your name"
        />
      </div>
      <div class="form-group">
        <label for="email" class="form-label">Email</label>
        <input
          type="email"
          id="email"
          name="email"
          class="form-control"
          required
          placeholder="Enter your email"
        />
      </div>
      <div class="form-group">
        <label for="message" class="form-label">Message</label>
        <textarea
          id="message"
          name="message"
          class="form-control"
          rows="5"
          required
          placeholder="Your message here"
        ></textarea>
      </div>
      <div class="g-recaptcha" data-sitekey="6LfcnUopAAAAAD-D9GvXv0Mrnq47Wj1ZYBeYn6wO"></div>
      <div class="form-group">
        <button type="submit" class="btn btn-primary btn-block my-3">
          Submit
        </button>
      </div>
    </form>
    <script>
      $('#contactForm').on("submit", function (event) {
        event.preventDefault();
        var formData = $(this).serialize();

        // Ajax post
        $.ajax({
          type: "POST",
          url: "/contact",
          data: formData,
          success: function () {
            $("#contact-title").html("<h2>Thanks!</h2>")
            $("#contactForm").html("<p>I'll get back to you as soon as possible.</p>")
          },
        });
      });
    </script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  </div>

  <%- include('partials/footer') %>
  <%- include('partials/scripts') %>
</body>
</html>
